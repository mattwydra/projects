<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Tracking Mode</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
        }

        #game-container {
            position: relative;
            width: 800px;
            height: 400px;
            margin: 20px auto;
            border: 2px solid black;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <h1>Cursor Tracking Mode</h1>
    <p>Move your cursor along the line as accurately as possible!</p>
    <div id="game-container">
        <canvas id="gameCanvas" width="800" height="400"></canvas>
    </div>
    <p id="stats">Accuracy: 0% | Speed: 0 px/sec</p>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        let tracking = false;
        let lastTime = null;
        let totalDistance = 0;
        let totalDeviation = 0;
        let pointsTracked = 0;

        // Draw the target tracking line
        function drawLine() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.moveTo(100, 200);
            ctx.lineTo(700, 200);
            ctx.strokeStyle = "red";
            ctx.lineWidth = 4;
            ctx.stroke();
        }

        drawLine();

        // Track cursor movement
        canvas.addEventListener("mousemove", (event) => {
            if (!tracking) return;
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            if (lastTime) {
                const timeElapsed = (performance.now() - lastTime) / 1000;
                totalDistance += Math.abs(x - (pointsTracked > 0 ? lastX : x)) / timeElapsed;
            }

            // Calculate deviation from the ideal line
            const deviation = Math.abs(y - 200);
            totalDeviation += deviation;
            pointsTracked++;
            lastX = x;
            lastTime = performance.now();
        });

        // Start tracking when mouse enters
        canvas.addEventListener("mouseenter", () => {
            tracking = true;
            lastTime = performance.now();
            totalDistance = 0;
            totalDeviation = 0;
            pointsTracked = 0;
        });

        // Stop tracking when mouse leaves
        canvas.addEventListener("mouseleave", () => {
            tracking = false;
            const avgDeviation = pointsTracked > 0 ? totalDeviation / pointsTracked : 0;
            const accuracy = Math.max(0, 100 - avgDeviation);
            const speed = pointsTracked > 0 ? totalDistance / pointsTracked : 0;
            document.getElementById("stats").innerText = `Accuracy: ${accuracy.toFixed(2)}% | Speed: ${speed.toFixed(2)} px/sec`;
        });
    </script>
</body>

</html>